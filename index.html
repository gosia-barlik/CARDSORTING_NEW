<!DOCTYPE html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="foundation.css" />
<link rel="stylesheet" href="app.css" />
<link rel="stylesheet" href="d3-context-menu.css" />
</head>
<body>
  <button id="submit">zapisz</button>
        <div id="RenameNodeModal" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
          <h2 id="modalTitle">Rename Node</h2>
          <form id="RenameNodeForm">
            <div class="row">
              <div class="large-12 columns">
                <label>Node name
                  <input type="text" class="inputName" id='RenameNodeName' placeholder="node name" />
                </label>
              </div>
            </div>
            <div class="row">
              <div class="large-8 columns">
                &nbsp;
              </div>
              <div class="large-4 columns">
                <a href="#" class="button info" onclick="close_rename_node_modal()">Cancel</a>
                <a href="#" class="button success" onclick="rename_node()">Rename</a>
              </div>
            </div>
          </form>
          <a class="close-reveal-modal" aria-label="Close">&#215;</a>
        </div>

        <div id="CreateNodeModal" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
          <h2 id="modalTitle">Create Node</h2>
          <form id="CreateNodeForm">
            <div class="row">
              <div class="large-12 columns">
                <label>Node name
                  <input type="text" class="inputName" id='CreateNodeName' placeholder="node name" />
                </label>
              </div>
            </div>
            <div class="row">
              <div class="large-12 columns">
                <label>Node type
                  <input type="text" class="inputName" id='CreateNodeType' placeholder="node type" />
                </label>
              </div>
            </div>
            <div class="row">
              <div class="large-8 columns">
                &nbsp;
              </div>
              <div class="large-4 columns">
                <a href="#" class="button info" onclick="close_create_node_modal()">Cancel</a>
                <a href="#" class="button success" onclick="create_node()">Create</a>
              </div>
            </div>
          </form>
          <a class="close-reveal-modal" aria-label="Close">&#215;</a>
        </div>

        <div id="tree-container"></div>

        <script src="d3.v3.min.js"></script>
        <script src="dndTree.js"></script>
        <script src="d3-context-menu.js"></script>
        <script src="underscore-min.js"></script>
        <script src="jquery.js"></script>
        <script src="fastclick.js"></script>
        <script src="foundation.min.js"></script>
         <!-- The core Firebase JS SDK is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-firestore.js"></script>

        <!-- TODO: Add SDKs for Firebase products that you want to use
            https://firebase.google.com/docs/web/setup#available-libraries -->
        <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-analytics.js"></script>
        <script>
          // Your web app's Firebase configuration
          // For Firebase JS SDK v7.20.0 and later, measurementId is optional
          var firebaseConfig = {
            apiKey: "AIzaSyBnZtNieL1vCWKS-ueQqScq0apKM6z8fe4",
            authDomain: "d3tree-c5771.firebaseapp.com",
            projectId: "d3tree-c5771",
            storageBucket: "d3tree-c5771.appspot.com",
            messagingSenderId: "549107471455",
            appId: "1:549107471455:web:40bf444a73361072ac77ea",
            measurementId: "G-Z5TY2C82GM"
          };
          // Initialize Firebase
          firebase.initializeApp(firebaseConfig);
          firebase.analytics();
          const db = firebase.firestore();
          const settings={timestampsInSnapshots: true};
          db.settings(settings)
        </script>
        <script>
                var treeData = [];
                // for the first initialization
                $('document').ready(function(){
                    $(document).foundation();
                    $(document).on('opened', '[data-reveal]', function () {
                        var element = $(".inputName:visible").first();
                        element.focus(function(){
                            this.selectionStart = this.selectionEnd = this.value.length;
                        });
                        element.focus();
                    });
                    $('#RenameNodeForm').submit(function(e){
                            rename_node();
                            return false;
                    });
                    $('#CreateNodeForm').submit(function(e){
                            create_node();
                            return false;
                    });

    //                 db.collection('professions').add( {
    //                   "type":"1","name": "flare",
    // "children": [{
    //     "type":"1","name": "analytics",
    //     "children": [{
    //         "type":"1","name": "cluster",
    //         "children": [{
    //             "type":"1","name": "AgglomerativeCluster",
    //             "size": 3938,
    //         }, {
    //             "type":"1","name": "CommunityStructure",
    //             "size": 3812
    //         }, {
    //             "type":"1","name": "HierarchicalCluster",
    //             "size": 6714
    //         }, {
    //             "type":"1","name": "MergeEdge",
    //             "size": 743
    //         }]
    //     }, {
    //         "type":"1","name": "graph",
    //         "children": [{
    //             "type":"1","name": "BetweennessCentrality",
    //             "size": 3534
    //         }, {
    //             "type":"1","name": "LinkDistance",
    //             "size": 5731
    //         }, {
    //             "type":"1","name": "MaxFlowMinCut",
    //             "size": 7840
    //         }, {
    //             "type":"1","name": "ShortestPaths",
    //             "size": 5914
    //         }, {
    //             "type":"1","name": "SpanningTree",
    //             "size": 3416
    //         }]
    //     }, {
    //         "type":"1","name": "optimization",
    //         "children": [{
    //             "type":"1","name": "AspectRatioBanker",
    //             "size": 7074
    //         }]
    //     }]
    // }, {
    //     "type":"1","name": "animate",
    //     "children": [{
    //         "type":"1","name": "Easing",
    //         "size": 17010
    //     }, {
    //         "type":"1","name": "FunctionSequence",
    //         "size": 5842
    //     }, {
    //         "type":"1","name": "interpolate",
    //         "children": [{
    //             "type":"1","name": "ArrayInterpolator",
    //             "size": 1983
    //         }, {
    //             "type":"1","name": "ColorInterpolator",
    //             "size": 2047
    //         }, {
    //             "type":"1","name": "DateInterpolator",
    //             "size": 1375
    //         }, {
    //             "type":"1","name": "Interpolator",
    //             "size": 8746
    //         }, {
    //             "type":"1","name": "MatrixInterpolator",
    //             "size": 2202
    //         }, {
    //             "type":"1","name": "NumberInterpolator",
    //             "size": 1382
    //         }, {
    //             "type":"1","name": "ObjectInterpolator",
    //             "size": 1629
    //         }, {
    //             "type":"1","name": "PointInterpolator",
    //             "size": 1675
    //         }, {
    //             "type":"1","name": "RectangleInterpolator",
    //             "size": 2042
    //         }]
    //     }, {
    //         "type":"1","name": "ISchedulable",
    //         "size": 1041
    //     }, {
    //         "type":"1","name": "Parallel",
    //         "size": 5176
    //     }, {
    //         "type":"1","name": "Pause",
    //         "size": 449
    //     }, {
    //         "type":"1","name": "Scheduler",
    //         "size": 5593
    //     }, {
    //         "type":"1","name": "Sequence",
    //         "size": 5534
    //     }, {
    //         "type":"1","name": "Transition",
    //         "size": 9201
    //     }, {
    //         "type":"1","name": "Transitioner",
    //         "size": 19975
    //     }, {
    //         "type":"1","name": "TransitionEvent",
    //         "size": 1116
    //     }, {
    //         "type":"1","name": "Tween",
    //         "size": 6006
    //     }]
    // }, {
    //     "type":"1","name": "data",
    //     "children": [{
    //         "type":"1","name": "converters",
    //         "children": [{
    //             "type":"1","name": "Converters",
    //             "size": 721
    //         }, {
    //             "type":"1","name": "DelimitedTextConverter",
    //             "size": 4294
    //         }, {
    //             "type":"1","name": "GraphMLConverter",
    //             "size": 9800
    //         }, {
    //             "type":"1","name": "IDataConverter",
    //             "size": 1314
    //         }, {
    //             "type":"1","name": "JSONConverter",
    //             "size": 2220
    //         }]
    //     }, {
    //         "type":"1","name": "DataField",
    //         "size": 1759
    //     }, {
    //         "type":"1","name": "DataSchema",
    //         "size": 2165
    //     }, {
    //         "type":"1","name": "DataSet",
    //         "size": 586
    //     }, {
    //         "type":"1","name": "DataSource",
    //         "size": 3331
    //     }, {
    //         "type":"1","name": "DataTable",
    //         "size": 772
    //     }, {
    //         "type":"1","name": "DataUtil",
    //         "size": 3322
    //     }]
    // }, {
    //     "type":"1","name": "display",
    //     "children": [{
    //         "type":"1","name": "DirtySprite",
    //         "size": 8833
    //     }, {
    //         "type":"1","name": "LineSprite",
    //         "size": 1732
    //     }, {
    //         "type":"1","name": "RectSprite",
    //         "size": 3623
    //     }, {
    //         "type":"1","name": "TextSprite",
    //         "size": 10066
    //     }]
    // }, {
    //     "type":"1","name": "flex",
    //     "children": [{
    //         "type":"1","name": "FlareVis",
    //         "size": 4116
    //     }]
    // }, {
    //     "type":"1","name": "physics",
    //     "children": [{
    //         "type":"1","name": "DragForce",
    //         "size": 1082
    //     }, {
    //         "type":"1","name": "GravityForce",
    //         "size": 1336
    //     }, {
    //         "type":"1","name": "IForce",
    //         "size": 319
    //     }, {
    //         "type":"1","name": "NBodyForce",
    //         "size": 10498
    //     }, {
    //         "type":"1","name": "Particle",
    //         "size": 2822
    //     }, {
    //         "type":"1","name": "Simulation",
    //         "size": 9983
    //     }, {
    //         "type":"1","name": "Spring",
    //         "size": 2213
    //     }, {
    //         "type":"1","name": "SpringForce",
    //         "size": 1681
    //     }]
    // }, {
    //     "type":"1","name": "query",
    //     "children": [{
    //         "type":"1","name": "AggregateExpression",
    //         "size": 1616
    //     }, {
    //         "type":"1","name": "And",
    //         "size": 1027
    //     }, {
    //         "type":"1","name": "Arithmetic",
    //         "size": 3891
    //     }, {
    //         "type":"1","name": "Average",
    //         "size": 891
    //     }, {
    //         "type":"1","name": "BinaryExpression",
    //         "size": 2893
    //     }, {
    //         "type":"1","name": "Comparison",
    //         "size": 5103
    //     }, {
    //         "type":"1","name": "CompositeExpression",
    //         "size": 3677
    //     }, {
    //         "type":"1","name": "Count",
    //         "size": 781
    //     }, {
    //         "type":"1","name": "DateUtil",
    //         "size": 4141
    //     }, {
    //         "type":"1","name": "Distinct",
    //         "size": 933
    //     }, {
    //         "type":"1","name": "Expression",
    //         "size": 5130
    //     }, {
    //         "type":"1","name": "ExpressionIterator",
    //         "size": 3617
    //     }, {
    //         "type":"1","name": "Fn",
    //         "size": 3240
    //     }, {
    //         "type":"1","name": "If",
    //         "size": 2732
    //     }, {
    //         "type":"1","name": "IsA",
    //         "size": 2039
    //     }, {
    //         "type":"1","name": "Literal",
    //         "size": 1214
    //     }, {
    //         "type":"1","name": "Match",
    //         "size": 3748
    //     }, {
    //         "type":"1","name": "Maximum",
    //         "size": 843
    //     }, {
    //         "type":"1","name": "methods",
    //         "children": [{
    //             "type":"1","name": "add",
    //             "size": 593
    //         }, {
    //             "type":"1","name": "and",
    //             "size": 330
    //         }, {
    //             "type":"1","name": "average",
    //             "size": 287
    //         }, {
    //             "type":"1","name": "count",
    //             "size": 277
    //         }, {
    //             "type":"1","name": "distinct",
    //             "size": 292
    //         }, {
    //             "type":"1","name": "div",
    //             "size": 595
    //         }, {
    //             "type":"1","name": "eq",
    //             "size": 594
    //         }, {
    //             "type":"1","name": "fn",
    //             "size": 460
    //         }, {
    //             "type":"1","name": "gt",
    //             "size": 603
    //         }, {
    //             "type":"1","name": "gte",
    //             "size": 625
    //         }, {
    //             "type":"1","name": "iff",
    //             "size": 748
    //         }, {
    //             "type":"1","name": "isa",
    //             "size": 461
    //         }, {
    //             "type":"1","name": "lt",
    //             "size": 597
    //         }, {
    //             "type":"1","name": "lte",
    //             "size": 619
    //         }, {
    //             "type":"1","name": "max",
    //             "size": 283
    //         }, {
    //             "type":"1","name": "min",
    //             "size": 283
    //         }, {
    //             "type":"1","name": "mod",
    //             "size": 591
    //         }, {
    //             "type":"1","name": "mul",
    //             "size": 603
    //         }, {
    //             "type":"1","name": "neq",
    //             "size": 599
    //         }, {
    //             "type":"1","name": "not",
    //             "size": 386
    //         }, {
    //             "type":"1","name": "or",
    //             "size": 323
    //         }, {
    //             "type":"1","name": "orderby",
    //             "size": 307
    //         }, {
    //             "type":"1","name": "range",
    //             "size": 772
    //         }, {
    //             "type":"1","name": "select",
    //             "size": 296
    //         }, {
    //             "type":"1","name": "stddev",
    //             "size": 363
    //         }, {
    //             "type":"1","name": "sub",
    //             "size": 600
    //         }, {
    //             "type":"1","name": "sum",
    //             "size": 280
    //         }, {
    //             "type":"1","name": "update",
    //             "size": 307
    //         }, {
    //             "type":"1","name": "variance",
    //             "size": 335
    //         }, {
    //             "type":"1","name": "where",
    //             "size": 299
    //         }, {
    //             "type":"1","name": "xor",
    //             "size": 354
    //         }, {
    //             "type":"1","name": "_",
    //             "size": 264
    //         }]
    //     }, {
    //         "type":"1","name": "Minimum",
    //         "size": 843
    //     }, {
    //         "type":"1","name": "Not",
    //         "size": 1554
    //     }, {
    //         "type":"1","name": "Or",
    //         "size": 970
    //     }, {
    //         "type":"1","name": "Query",
    //         "size": 13896
    //     }, {
    //         "type":"1","name": "Range",
    //         "size": 1594
    //     }, {
    //         "type":"1","name": "StringUtil",
    //         "size": 4130
    //     }, {
    //         "type":"1","name": "Sum",
    //         "size": 791
    //     }, {
    //         "type":"1","name": "Variable",
    //         "size": 1124
    //     }, {
    //         "type":"1","name": "Variance",
    //         "size": 1876
    //     }, {
    //         "type":"1","name": "Xor",
    //         "size": 1101
    //     }]
    // }, {
    //     "type":"1","name": "scale",
    //     "children": [{
    //         "type":"1","name": "IScaleMap",
    //         "size": 2105
    //     }, {
    //         "type":"1","name": "LinearScale",
    //         "size": 1316
    //     }, {
    //         "type":"1","name": "LogScale",
    //         "size": 3151
    //     }, {
    //         "type":"1","name": "OrdinalScale",
    //         "size": 3770
    //     }, {
    //         "type":"1","name": "QuantileScale",
    //         "size": 2435
    //     }, {
    //         "type":"1","name": "QuantitativeScale",
    //         "size": 4839
    //     }, {
    //         "type":"1","name": "RootScale",
    //         "size": 1756
    //     }, {
    //         "type":"1","name": "Scale",
    //         "size": 4268
    //     }, {
    //         "type":"1","name": "ScaleType",
    //         "size": 1821
    //     }, {
    //         "type":"1","name": "TimeScale",
    //         "size": 5833
    //     }]
    // }, {
    //     "type":"1","name": "util",
    //     "children": [{
    //         "type":"1","name": "Arrays",
    //         "size": 8258
    //     }, {
    //         "type":"1","name": "Colors",
    //         "size": 10001
    //     }, {
    //         "type":"1","name": "Dates",
    //         "size": 8217
    //     }, {
    //         "type":"1","name": "Displays",
    //         "size": 12555
    //     }, {
    //         "type":"1","name": "Filter",
    //         "size": 2324
    //     }, {
    //         "type":"1","name": "Geometry",
    //         "size": 10993
    //     }, {
    //         "type":"1","name": "heap",
    //         "children": [{
    //             "type":"1","name": "FibonacciHeap",
    //             "size": 9354
    //         }, {
    //             "type":"1","name": "HeapNode",
    //             "size": 1233
    //         }]
    //     }, {
    //         "type":"1","name": "IEvaluable",
    //         "size": 335
    //     }, {
    //         "type":"1","name": "IPredicate",
    //         "size": 383
    //     }, {
    //         "type":"1","name": "IValueProxy",
    //         "size": 874
    //     }, {
    //         "type":"1","name": "math",
    //         "children": [{
    //             "type":"1","name": "DenseMatrix",
    //             "size": 3165
    //         }, {
    //             "type":"1","name": "IMatrix",
    //             "size": 2815
    //         }, {
    //             "type":"1","name": "SparseMatrix",
    //             "size": 3366
    //         }]
    //     }, {
    //         "type":"1","name": "Maths",
    //         "size": 17705
    //     }, {
    //         "type":"1","name": "Orientation",
    //         "size": 1486
    //     }, {
    //         "type":"1","name": "palette",
    //         "children": [{
    //             "type":"1","name": "ColorPalette",
    //             "size": 6367
    //         }, {
    //             "type":"1","name": "Palette",
    //             "size": 1229
    //         }, {
    //             "type":"1","name": "ShapePalette",
    //             "size": 2059
    //         }, {
    //             "type":"1","name": "SizePalette",
    //             "size": 2291
    //         }]
    //     }, {
    //         "type":"1","name": "Property",
    //         "size": 5559
    //     }, {
    //         "type":"1","name": "Shapes",
    //         "size": 19118
    //     }, {
    //         "type":"1","name": "Sort",
    //         "size": 6887
    //     }, {
    //         "type":"1","name": "Stats",
    //         "size": 6557
    //     }, {
    //         "type":"1","name": "Strings",
    //         "size": 22026
    //     }]
    // }, {
    //     "type":"1","name": "vis",
    //     "children": [{
    //         "type":"1","name": "axis",
    //         "children": [{
    //             "type":"1","name": "Axes",
    //             "size": 1302
    //         }, {
    //             "type":"1","name": "Axis",
    //             "size": 24593
    //         }, {
    //             "type":"1","name": "AxisGridLine",
    //             "size": 652
    //         }, {
    //             "type":"1","name": "AxisLabel",
    //             "size": 636
    //         }, {
    //             "type":"1","name": "CartesianAxes",
    //             "size": 6703
    //         }]
    //     }, {
    //         "type":"1","name": "controls",
    //         "children": [{
    //             "type":"1","name": "AnchorControl",
    //             "size": 2138
    //         }, {
    //             "type":"1","name": "ClickControl",
    //             "size": 3824
    //         }, {
    //             "type":"1","name": "Control",
    //             "size": 1353
    //         }, {
    //             "type":"1","name": "ControlList",
    //             "size": 4665
    //         }, {
    //             "type":"1","name": "DragControl",
    //             "size": 2649
    //         }, {
    //             "type":"1","name": "ExpandControl",
    //             "size": 2832
    //         }, {
    //             "type":"1","name": "HoverControl",
    //             "size": 4896
    //         }, {
    //             "type":"1","name": "IControl",
    //             "size": 763
    //         }, {
    //             "type":"1","name": "PanZoomControl",
    //             "size": 5222
    //         }, {
    //             "type":"1","name": "SelectionControl",
    //             "size": 7862
    //         }, {
    //             "type":"1","name": "TooltipControl",
    //             "size": 8435
    //         }]
    //     }, {
    //         "type":"1","name": "data",
    //         "children": [{
    //             "type":"1","name": "Data",
    //             "size": 20544
    //         }, {
    //             "type":"1","name": "DataList",
    //             "size": 19788
    //         }, {
    //             "type":"1","name": "DataSprite",
    //             "size": 10349
    //         }, {
    //             "type":"1","name": "EdgeSprite",
    //             "size": 3301
    //         }, {
    //             "type":"1","name": "NodeSprite",
    //             "size": 19382
    //         }, {
    //             "type":"1","name": "render",
    //             "children": [{
    //                 "type":"1","name": "ArrowType",
    //                 "size": 698
    //             }, {
    //                 "type":"1","name": "EdgeRenderer",
    //                 "size": 5569
    //             }, {
    //                 "type":"1","name": "IRenderer",
    //                 "size": 353
    //             }, {
    //                 "type":"1","name": "ShapeRenderer",
    //                 "size": 2247
    //             }]
    //         }, {
    //             "type":"1","name": "ScaleBinding",
    //             "size": 11275
    //         }, {
    //             "type":"1","name": "Tree",
    //             "size": 7147
    //         }, {
    //             "type":"1","name": "TreeBuilder",
    //             "size": 9930
    //         }]
    //     }, {
    //         "type":"1","name": "events",
    //         "children": [{
    //             "type":"1","name": "DataEvent",
    //             "size": 2313
    //         }, {
    //             "type":"1","name": "SelectionEvent",
    //             "size": 1880
    //         }, {
    //             "type":"1","name": "TooltipEvent",
    //             "size": 1701
    //         }, {
    //             "type":"1","name": "VisualizationEvent",
    //             "size": 1117
    //         }]
    //     }, {
    //         "type":"1","name": "legend",
    //         "children": [{
    //             "type":"1","name": "Legend",
    //             "size": 20859
    //         }, {
    //             "type":"1","name": "LegendItem",
    //             "size": 4614
    //         }, {
    //             "type":"1","name": "LegendRange",
    //             "size": 10530
    //         }]
    //     }, {
    //         "type":"1","name": "operator",
    //         "children": [{
    //             "type":"1","name": "distortion",
    //             "children": [{
    //                 "type":"1","name": "BifocalDistortion",
    //                 "size": 4461
    //             }, {
    //                 "type":"1","name": "Distortion",
    //                 "size": 6314
    //             }, {
    //                 "type":"1","name": "FisheyeDistortion",
    //                 "size": 3444
    //             }]
    //         }, {
    //             "type":"1","name": "encoder",
    //             "children": [{
    //                 "type":"1","name": "ColorEncoder",
    //                 "size": 3179
    //             }, {
    //                 "type":"1","name": "Encoder",
    //                 "size": 4060
    //             }, {
    //                 "type":"1","name": "PropertyEncoder",
    //                 "size": 4138
    //             }, {
    //                 "type":"1","name": "ShapeEncoder",
    //                 "size": 1690
    //             }, {
    //                 "type":"1","name": "SizeEncoder",
    //                 "size": 1830
    //             }]
    //         }, {
    //             "type":"1","name": "filter",
    //             "children": [{
    //                 "type":"1","name": "FisheyeTreeFilter",
    //                 "size": 5219
    //             }, {
    //                 "type":"1","name": "GraphDistanceFilter",
    //                 "size": 3165
    //             }, {
    //                 "type":"1","name": "VisibilityFilter",
    //                 "size": 3509
    //             }]
    //         }, {
    //             "type":"1","name": "IOperator",
    //             "size": 1286
    //         }, {
    //             "type":"1","name": "label",
    //             "children": [{
    //                 "type":"1","name": "Labeler",
    //                 "size": 9956
    //             }, {
    //                 "type":"1","name": "RadialLabeler",
    //                 "size": 3899
    //             }, {
    //                 "type":"1","name": "StackedAreaLabeler",
    //                 "size": 3202
    //             }]
    //         }, {
    //             "type":"1","name": "layout",
    //             "children": [{
    //                 "type":"1","name": "AxisLayout",
    //                 "size": 6725
    //             }, {
    //                 "type":"1","name": "BundledEdgeRouter",
    //                 "size": 3727
    //             }, {
    //                 "type":"1","name": "CircleLayout",
    //                 "size": 9317
    //             }, {
    //                 "type":"1","name": "CirclePackingLayout",
    //                 "size": 12003
    //             }, {
    //                 "type":"1","name": "DendrogramLayout",
    //                 "size": 4853
    //             }, {
    //                 "type":"1","name": "ForceDirectedLayout",
    //                 "size": 8411
    //             }, {
    //                 "type":"1","name": "IcicleTreeLayout",
    //                 "size": 4864
    //             }, {
    //                 "type":"1","name": "IndentedTreeLayout",
    //                 "size": 3174
    //             }, {
    //                 "type":"1","name": "Layout",
    //                 "size": 7881
    //             }, {
    //                 "type":"1","name": "NodeLinkTreeLayout",
    //                 "size": 12870
    //             }, {
    //                 "type":"1","name": "PieLayout",
    //                 "size": 2728
    //             }, {
    //                 "type":"1","name": "RadialTreeLayout",
    //                 "size": 12348
    //             }, {
    //                 "type":"1","name": "RandomLayout",
    //                 "size": 870
    //             }, {
    //                 "type":"1","name": "StackedAreaLayout",
    //                 "size": 9121
    //             }, {
    //                 "type":"1","name": "TreeMapLayout",
    //                 "size": 9191
    //             }]
    //         }, {
    //             "type":"1","name": "Operator",
    //             "size": 2490
    //         }, {
    //             "type":"1","name": "OperatorList",
    //             "size": 5248
    //         }, {
    //             "type":"1","name": "OperatorSequence",
    //             "size": 4190
    //         }, {
    //             "type":"1","name": "OperatorSwitch",
    //             "size": 2581
    //         }, {
    //             "type":"1","name": "SortOperator",
    //             "size": 2023
    //         }]
    //     }, {
    //         "type":"1","name": "Visualization",
    //         "size": 16540
    //     }]
    // }]
    //                 });

                    db.collection('professions').onSnapshot(res=> {
                      res.docChanges().forEach(change => {
                    
                        const doc = {...change.doc.data(), id: change.doc.id};
                    
                        switch (change.type) {
                          case 'added':
                          treeData.push(doc);
                            break;
                          case 'modified':
                            const index = treeData.findIndex(item => item.id == doc.id);
                            treeData[index] = doc;
                            break;
                          case 'removed':
                          treeData = treeData.filter(item => item.id !== doc.id);
                            break;
                          default:
                            break;
                        }
                        
                        var treeJSON = draw_tree(null, treeData[0])//TODO:: change from array 0 
                      });
                  });
                });
        </script>
</body>
</html>

